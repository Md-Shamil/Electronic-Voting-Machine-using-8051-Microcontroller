ORG 0000H
	CLR PSW.4
	CLR PSW.3
	MOV R0,#30H
	MOV R1,#30H
	SETB PSW.4
	CLR PSW.3
	MOV R0,#30H
	MOV R1,#30H
	SETB PSW.4
	SETB PSW.3
	MOV R0,#30H
	MOV R1,#30H
	SJMP MAIN
	RESET:CLR PSW.4
	CLR PSW.3
	MOV R0,#30H
	MOV R1,#30H
	SETB PSW.4
	CLR PSW.3
	MOV R0,#30H
	MOV R1,#30H
	SETB PSW.4
	SETB PSW.3
	MOV R0,#30H
	MOV R1,#30H
	LJMP LCD
	
	MAIN:MOV A,#00H
	MOV P1,A
	HERE:JB P1.1,LCD
	JB P1.7,RESET
	JNB P1.0,HERE
	MOV A,#01H
	ACALL COMNWRT
	ACALL DELAY
	AGAIN:JNB P1.2,HERE1
	CLR PSW.4
	CLR PSW.3
	MOV A,R0
	CJNE A,#39H,K1
	MOV R0,#30H
	MOV A,R1
	INC A
	MOV R1,A
	SJMP H1
	K1:INC A
	MOV R0,A
	H1:LJMP MAIN
	
	HERE1:NOP
	JNB P1.3,HERE5
	SETB PSW.4
	CLR PSW.3
	MOV A,R0
	CJNE A,#39H,K2
	MOV R0,#30H
	MOV A,R1
	INC A
	MOV R1,A
	SJMP H2
	K2:INC A
	MOV R0,A
	H2:LJMP MAIN
	
	HERE5:NOP
	JNB P1.4,AGAIN
	SETB PSW.4
	SETB PSW.3
	MOV A,R0
	CJNE A,#39H,K3
	MOV R0,#30H
	MOV A,R1
	INC A
	MOV R1,A
	SJMP H3
	K3:INC A
	MOV R0,A
	H3:LJMP MAIN
	
	
	LCD:MOV A,#38H
	ACALL COMNWRT
	ACALL DELAY
	MOV A,#0EH
	ACALL COMNWRT
	ACALL DELAY
	MOV A,#01H
	ACALL COMNWRT
	ACALL DELAY
	MOV A,#06H
	ACALL COMNWRT
	ACALL DELAY
	MOV A,#80H
	ACALL COMNWRT
	ACALL DELAY
	MOV A,#'P'
	ACALL DATAWRT
	ACALL DELAY
	MOV A,#'1'
	ACALL DATAWRT
	ACALL DELAY
	MOV A,#':'
	ACALL DATAWRT
	ACALL DELAY
	CLR PSW.4
	CLR PSW.3
	MOV A,R1
	ACALL DATAWRT
	ACALL DELAY
	MOV A,R0
	ACALL DATAWRT
	ACALL DELAY
	MOV A,#' '
	ACALL DATAWRT
	ACALL DELAY
	MOV A,#'P'
	ACALL DATAWRT
	ACALL DELAY
	MOV A,#'2'
	ACALL DATAWRT
	ACALL DELAY
	MOV A,#':'
	ACALL DATAWRT
	ACALL DELAY
	SETB PSW.4
	CLR PSW.3
	MOV A,R1
	ACALL DATAWRT
	ACALL DELAY
	MOV A,R0
	ACALL DATAWRT
	ACALL DELAY
	MOV A,#0C0H
	ACALL COMNWRT
	ACALL DELAY
	MOV A,#'P'
	ACALL DATAWRT
	ACALL DELAY
	MOV A,#'3'
	ACALL DATAWRT
	ACALL DELAY
	MOV A,#':'
	ACALL DATAWRT
	ACALL DELAY
	SETB PSW.4
	SETB PSW.3
	MOV A,R1
	ACALL DATAWRT
	ACALL DELAY
	MOV A,R0
	ACALL DATAWRT
	ACALL DELAY
	LJMP MAIN
	COMNWRT: MOV P2,A
	CLR P3.0
	CLR P3.1
	SETB P3.2
	ACALL DELAY
	CLR P3.2
	RET
	DATAWRT: MOV P2,A
	SETB P3.0
	CLR P3.1
	SETB P3.2
	ACALL DELAY
	CLR P3.2
	RET
	CLR PSW.4
	CLR PSW.3
	DELAY: MOV R4,#255
	HERE0: DJNZ R4,HERE0
	RET
	END